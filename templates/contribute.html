{% extends 'base.html' %}
{% block title %}
Contribute to Psyclonic Studios
{% endblock %}
{% block body %}
<div class="indent-page support-page">
  {{ support_text | safe }}
</div>
<div class="gallery-horizontal-container">
  <div class="gallery-horizontal full-page" style="--num-tiles: {{ number_of_products }}">
    {% for product in contribute_products %}
    <div class="gallery-horizontal-item contribute-product">
      <img src="{{ product.artwork_image_url }}" alt="{{ product.title }}">
      <div class="contribute-product-buttons">
        <div class="contribute-product-price">
          {{ product.basePrice | format_money }}
        </div>
        <div class="quantity-container">
          <button class="highlight quantity-button" type="button"
            onclick="addToQuantity('{{ product.sku }}', -1)">-</button>
          <span class="quantity" id="{{ product.sku }}">0</span>
          <button class="highlight quantity-button" type="button"
            onclick="addToQuantity('{{ product.sku }}', 1)">+</button>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  <span class="scroll-button previous"></span>
  <span class="scroll-button next"></span>
</div>
<div class="contribution">
  {% for donation in donation_skus %}
    <button class="highlight submit" onclick="addToQuantity('{{ donation.id }}', 1, false)">+{{ (donation.price / 100) | format_money }}</button>
  {% endfor %}
</div>
<div class="checkout">

  <span id="cost"></span>

  <button class="highlight submit" id="checkout-button" role="link">
    Checkout
  </button>
</div>

<div id="error-message"></div>
<script>
  let products = {
    {% for product in contribute_products %}
      {{ product.sku }}: {
        price: {{ product.basePrice }},
        quantity: 0
      },
    {% endfor %}
    {% for donation in donation_skus %}
      {{ donation.id }}: {
        price: {{ donation.price / 100 }},
        quantity: 0
      },
    {% endfor %}
  }
</script>
<script src="https://js.stripe.com/v3"></script>
<script type="text/javascript" src="{{ url_for('static', filename='contribute.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='scroll.js') }}"></script>
{% endblock %}