{% extends 'base.html' %}
{% block title %}
Contact
{% endblock %}
{% block head %}
<meta name="description" content="Contact the artist, Anne-Maree Hunter, at Psyclonic Studios">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "name": "Contact",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
            "@type": "ListItem",
            "position": 1,
            "name": "Psyclonic Studios",
            "item": "{{ url_for('home', _external=True) }}"
        },
        {
            "@type": "ListItem",
            "position": 2,
            "name": "Contact",
            "item": "{{ url_for('contact', _external=True) }}"
        }
      ]
    }
</script>
<script src="https://www.google.com/recaptcha/api.js?render=6LdjesoUAAAAACfe0IhuIplHWjEDIXWHj-KfDbn_"></script>
{% endblock %}
{% block body %}
<div class="narrow-page medium-vertical-margins center">
    <h1>Contact</h1>
    {{ contact_message | safe }}
    <form action="/contact_send" method="POST">
        <div class="medium-vertical-margins">
            <input id="enquire-name" class="user-input border-accent small-vertical-margins" type="text" name="name"
                placeholder="Name" required autocomplete="name">
            <input id="enquire-email" class="user-input border-accent" type="email" name="email" placeholder="Email"
                required autocomplete="email">
        </div>
        <div class="medium-vertical-margins">
            <textarea class="user-input user-message border-accent" type="textarea" name="message"
                placeholder="Your message" required></textarea>
        </div>
        <div class="medium-vertical-margins">
            <button type="reset"
                class="hover-accent text-primary background-white border-accent button-wide">Cancel</button>
            <button type="submit"
                class="hover-accent text-primary background-white border-accent button-wide">Submit</button>
        </div>
    </form>
</div>
<p class="center narrow-page medium-vertical-margins small-font">
    Using the form above is the preferred contact method, but you may get <a id="request-contact-info">direct
        contact information</a> if you require it.
        <br>
    (This is protected by reCAPTCHA and the Google
    <a href="https://policies.google.com/privacy">Privacy Policy</a> and
    <a href="https://policies.google.com/terms">Terms of Service</a> apply)
</p>
<script>
    grecaptcha.ready(function () {
        document.getElementById('request-contact-info').addEventListener('click', () => {
            grecaptcha.execute('6LdjesoUAAAAACfe0IhuIplHWjEDIXWHj-KfDbn_', { action: 'request_contact_info' }).then(function (token) {
                const form = new FormData();
                form.append('recaptchaToken', token);
                const xhr = new XMLHttpRequest();
                xhr.onload = function () {
                    document.write(xhr.response);
                }
                xhr.open("POST", '/contact');
                xhr.send(form);
            });
        });
    });
</script>
{% endblock %}